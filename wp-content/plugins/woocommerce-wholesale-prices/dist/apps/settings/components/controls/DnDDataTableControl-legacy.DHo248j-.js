System.register(["../../index-legacy.D_HQ7UHt.js","../../../../common/settings-store-legacy.CBbG64Gq.js","../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_0b913e4f_lang-legacy.BO_p-I62.js","../../../../common/EditOutlined-legacy.DA-DPmkm.js","../../../../common/DeleteOutlined-legacy.BsKdC1O1.js","../../../../common/index-legacy.Dc6Q8xCb.js","../../../../common/_plugin-vue_export-helper-legacy.BVIICed7.js","../../../../common/index-legacy.CmnYj8HR.js","../../../../common/motion-legacy.DaDvaV3z.js","../../../../common/index-legacy.CZsp51nD.js","../../../../common/index-legacy.B22f4Bi8.js","../../../../common/useState-legacy.DRA39OiQ.js","../../../../common/warning-legacy.CsQLB1iG.js","../../../../common/compact-item-legacy.CSenwEfn.js","../../../../common/createContext-legacy.BEVKniUZ.js","../../../../common/useMergedState-legacy.BnDPKCDY.js","../../../../common/KeyCode-legacy.zo7Ifc6W.js","../../../../common/ActionButton-legacy.Bmf66kj_.js"],function(e,a){"use strict";var l,t,o,n,d,c,i,s,r,u,m,y,g,p,f,_,j,v,k,b,D,h,w,x,C;return{setters:[e=>{l=e.d,t=e.t,o=e.s,n=e.S,d=e.r,c=e.c,i=e.o,s=e.a,r=e.b,u=e.U,m=e.V,y=e.i,g=e.u,p=e.w,f=e.n,_=e.f,j=e.h,v=e.e,k=e.$},e=>{b=e.u},e=>{D=e.d},e=>{h=e.E},e=>{w=e.D},e=>{x=e.A},e=>{C=e._},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a={class:"wwp-full-width-table"},S={class:"thead-dark"},O={key:0,class:"editable-row-operations"},U={key:0,class:"editable-cell"},V=["onClick"];e("default",C(l({__name:"DnDDataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})},editedFields:{type:Number,required:!1,default:0}},emits:["fieldUpdatedData","fieldDeletedData","updateDataSource"],setup(e,{emit:l}){const C=e,{params:q,data:A,editedFields:E}=t(C),F=b(),{inlineMappingEdit:T}=o(F),B=q.value,M=B.fields,N=n({data:window.lodash.sortBy(A.value,e=>void 0!==e.field_order&&null!==e.field_order?e.field_order:0)}),I=B.editable,J=B.can_delete,K=B.delete_action,P=B.sort_action,Q=d(B.show_in_table),R=d(!1),W=n([]),X=E,Y=l,Z=d([]),$=async e=>{const a=[{key:"action",value:P}],l=N.data;a.push({key:"list",value:l});try{const e=await k(a,!1,!0);null!=e&&Y("updateDataSource",e)}catch(t){console.error(t)}};return(e,l)=>(i(),c("table",a,[s("thead",S,[s("tr",null,[(i(!0),c(u,null,m(g(M),(e,a)=>(i(),c("th",{key:a,scope:"col"},y(e.title),1))),128))])]),r(g(D),{modelValue:N.data,"onUpdate:modelValue":l[0]||(l[0]=e=>N.data=e),tag:"tbody","item-key":"name",onEnd:$},{item:p(({element:e})=>[s("tr",{class:f({"not-draggable":!e?.draggable})},[(i(!0),c(u,null,m(Q.value,(a,t)=>{return i(),c("td",{key:t,scope:"row"},["operation"===a?(i(),c("div",O,[null===g(X)?(i(),c("div",U,[g(I)?(i(),c("a",{key:0,onClick:a=>{return l=e.key,W[l]=window.lodash.cloneDeep(N.data.filter(e=>l===e.key)[0]),Z.value=W[l],T.value=!1,void Y("fieldUpdatedData",Z.value);var l}},[r(g(h))],8,V)):_("",!0),l[1]||(l[1]=j(" Â  ")),g(J)&&"no"!==e?.deletetable?(i(),c(u,{key:1},[N.data.length?(i(),v(g(x),{key:0,title:"Sure to delete?",onConfirm:a=>(async e=>{const a=N.data.filter(a=>e===a.key)[0],l=[{key:"action",value:K}];for(const[o,n]of Object.entries(a))l.push({key:o,value:n});try{"success"===await k(l)&&(Y("fieldDeletedData",e),N.data=N.data.filter(a=>a.key!==e))}catch(t){console.error(t)}finally{R.value=!1}})(e.key)},{default:p(()=>[s("a",null,[r(g(w))])]),_:2},1032,["onConfirm"])):_("",!0)],64)):_("",!0)])):_("",!0)])):(i(),c(u,{key:1},[j(y((o=e[a],Array.isArray(o)?o.join(", "):o)),1)],64))]);var o}),128))],2)]),_:1},8,["modelValue"])]))}}),[["__scopeId","data-v-0b913e4f"]]))}}});
