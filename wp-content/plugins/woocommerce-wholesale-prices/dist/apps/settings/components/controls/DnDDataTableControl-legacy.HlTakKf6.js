System.register(["../../index-legacy.CV2KRSvP.js","../../../../common/settings-store-legacy.BxiOnfTQ.js","../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_0b913e4f_lang-legacy.DHxzJ1bS.js","../../../../common/EditOutlined-legacy.BZ8mIl-g.js","../../../../common/DeleteOutlined-legacy.KvWF-zoM.js","../../../../common/index-legacy.ZEOhfVRA.js","../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../common/index-legacy.DHEvdWU1.js","../../../../common/motion-legacy.Zihzw6dt.js","../../../../common/index-legacy.BSsFDV5a.js","../../../../common/index-legacy.QVxX_DIq.js","../../../../common/useState-legacy.blkaH1TT.js","../../../../common/warning-legacy.BV4CRm2j.js","../../../../common/compact-item-legacy.CCNfvECR.js","../../../../common/createContext-legacy.96H2Yoah.js","../../../../common/useMergedState-legacy.llXgCMNj.js","../../../../common/KeyCode-legacy.CYgXvjDm.js","../../../../common/ActionButton-legacy.O-A9_Hz4.js"],(function(e,l){"use strict";var a,t,o,n,d,c,i,s,r,u,m,y,g,p,f,_,j,v,k,b,D,h,w,x,C;return{setters:[e=>{a=e.d,t=e.t,o=e.s,n=e.S,d=e.r,c=e.o,i=e.c,s=e.a,r=e.U,u=e.V,m=e.h,y=e.u,g=e.b,p=e.w,f=e.n,_=e.i,j=e.f,v=e.e,k=e.$},e=>{b=e.u},e=>{D=e.d},e=>{h=e.E},e=>{w=e.D},e=>{x=e.A},e=>{C=e._},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"wwp-full-width-table"},S={class:"thead-dark"},O={key:0,class:"editable-row-operations"},U={key:0,class:"editable-cell"},V=["onClick"];e("default",C(a({__name:"DnDDataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})},editedFields:{type:Number,required:!1,default:0}},emits:["fieldUpdatedData","fieldDeletedData","updateDataSource"],setup(e,{emit:a}){const C=e,{params:q,data:A,editedFields:E}=t(C),F=b(),{inlineMappingEdit:T}=o(F),B=q.value,M=B.fields,N=n({data:window.lodash.sortBy(A.value,(e=>void 0!==e.field_order&&null!==e.field_order?e.field_order:0))}),I=B.editable,J=B.can_delete,K=B.delete_action,P=B.sort_action,Q=d(B.show_in_table),R=d(!1),W=n([]),X=E,Y=a,Z=d([]),$=async e=>{const l=[{key:"action",value:P}],a=N.data;l.push({key:"list",value:a});try{const e=await k(l,!1,!0);null!=e&&Y("updateDataSource",e)}catch(t){console.error(t)}};return(e,a)=>(c(),i("table",l,[s("thead",S,[s("tr",null,[(c(!0),i(r,null,u(y(M),((e,l)=>(c(),i("th",{key:l,scope:"col"},m(e.title),1)))),128))])]),g(y(D),{modelValue:N.data,"onUpdate:modelValue":a[0]||(a[0]=e=>N.data=e),tag:"tbody","item-key":"name",onEnd:$},{item:p((({element:e})=>[s("tr",{class:f({"not-draggable":!(null!=e&&e.draggable)})},[(c(!0),i(r,null,u(Q.value,((l,t)=>{return c(),i("td",{key:t,scope:"row"},["operation"===l?(c(),i("div",O,[null===y(X)?(c(),i("div",U,[y(I)?(c(),i("a",{key:0,onClick:l=>{return a=e.key,W[a]=window.lodash.cloneDeep(N.data.filter((e=>a===e.key))[0]),Z.value=W[a],T.value=!1,void Y("fieldUpdatedData",Z.value);var a}},[g(y(h))],8,V)):_("",!0),a[1]||(a[1]=j(" Â  ")),y(J)&&"no"!==(null==e?void 0:e.deletetable)?(c(),i(r,{key:1},[N.data.length?(c(),v(y(x),{key:0,title:"Sure to delete?",onConfirm:l=>(async e=>{const l=N.data.filter((l=>e===l.key))[0],a=[{key:"action",value:K}];for(const[o,n]of Object.entries(l))a.push({key:o,value:n});try{"success"===await k(a)&&(Y("fieldDeletedData",e),N.data=N.data.filter((l=>l.key!==e)))}catch(t){console.error(t)}finally{R.value=!1}})(e.key)},{default:p((()=>[s("a",null,[g(y(w))])])),_:2},1032,["onConfirm"])):_("",!0)],64)):_("",!0)])):_("",!0)])):(c(),i(r,{key:1},[j(m((o=e[l],Array.isArray(o)?o.join(", "):o)),1)],64))]);var o})),128))],2)])),_:1},8,["modelValue"])]))}}),[["__scopeId","data-v-0b913e4f"]]))}}}));
