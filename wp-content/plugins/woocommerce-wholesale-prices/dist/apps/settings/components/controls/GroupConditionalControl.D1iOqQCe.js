import{_ as G,P as g,k as Y,l as We,m as Ke,d as me,q as L,v as Ee,x as ve,y as Z,z as Le,A as Ce,b as m,T as _e,B as Se,C as ke,D as z,E as ze,F as Re,r as U,G as Xe,H as Ye,I as Ge,J as K,K as qe,L as Je,M as Qe,N as xe,O as De,Q as he,R as Ze,t as et,s as tt,S as nt,g as Oe,o as I,c as R,a as $e,u as x,U as pe,V as Pe,e as de,w as X,W as Ne,X as Te,Y as je,Z as Ie,f as be,h as ge,i as ye,n as at,p as ot,$ as Be}from"../../index.0FToouit.js";import{u as lt}from"../../../../common/settings-store.-U_xgh6L.js";import rt from"./DnDDataTableControl.BKOIGW9N.js";import{_ as it}from"../../../../common/DataTableControl.vue_vue_type_script_setup_true_lang.NU6umRA0.js";import{d as dt,B as we}from"../../../../common/index.DuahDua_.js";import{K as st}from"../../../../common/KeyCode.B_gOgbN6.js";import{P as ut}from"../../../../common/motion.EdENdc_P.js";import{N as ft}from"../../../../common/compact-item.CBELd0YD.js";/* empty css                                                                                                 */import{_ as ct}from"../../../../common/_plugin-vue_export-helper.DlAUqK2U.js";import"../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_0b913e4f_lang.C7OEap8d.js";import"../../../../common/EditOutlined.KbemwFb1.js";import"../../../../common/DeleteOutlined.BPTeAZVG.js";import"../../../../common/index.CL4_wdF3.js";import"../../../../common/index.orUix1Mb.js";import"../../../../common/useMergedState.CeRJTcTW.js";import"../../../../common/ActionButton.CpaivzRg.js";import"../../../../common/GroupEditFields.vue_vue_type_script_setup_true_lang.BHnpEQ8A.js";import"../../../../common/index.9myCtLWz.js";import"../../../../common/FormItemContext.CqVJozov.js";import"../../../../common/createContext.DswTPIOS.js";import"../../../../common/statusUtils.fyn02DMp.js";import"../../../../common/SearchOutlined.03_Rn6S4.js";import"../../../../common/index.CJHWgkCV.js";import"../../../../common/isPlainObject.DqIkjRjv.js";import"../../../../common/index.u8fchTh8.js";import"../../../../common/index.BBSQqZBe.js";import"../../../../common/pickAttrs.C4jbNTpE.js";import"../../../../common/slide.C3sR3tWs.js";import"../../../../common/isMobile.WcF_19Ab.js";import"../../../../common/useState.DjxQpG1z.js";import"../../../../common/DownOutlined.DUQyvKP0.js";import"../../../../common/index.Dzg1kzGK.js";import"../../../../common/index.Cc7blb_p.js";import"../../../../common/index.BTvIsX50.js";import"../../../../common/warning.CrM1WiW4.js";import"../../../../common/index.1EK9wRFW.js";import"../../../../common/index.CHOsJRCc.js";import"../../../../common/index.BLSGQKo4.js";import"../../../../common/Checkbox.CG5oI9Sy.js";import"../../../../common/index.DZxE9LJP.js";import"../../../../common/debounce.-jketAQO.js";const Fe=e=>!isNaN(parseFloat(e))&&isFinite(e),Ue=()=>({prefixCls:String,width:g.oneOfType([g.string,g.number]),height:g.oneOfType([g.string,g.number]),style:{type:Object,default:void 0},class:String,rootClassName:String,rootStyle:Y(),placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:We(),autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},motion:Ke(),maskMotion:Y()}),pt=()=>G(G({},Ue()),{forceRender:{type:Boolean,default:void 0},getContainer:g.oneOfType([g.string,g.func,g.object,g.looseBool])}),yt=()=>G(G({},Ue()),{getContainer:Function,getOpenCount:Function,scrollLocker:g.any,inline:Boolean});function vt(e){return Array.isArray(e)?e:[e]}const mt={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"};Object.keys(mt).filter(e=>{if(typeof document>"u")return!1;const s=document.getElementsByTagName("html")[0];return e in(s?s.style:{})})[0];const ht=!(typeof window<"u"&&window.document&&window.document.createElement);var bt=function(e,s){var p={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(p[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,n=Object.getOwnPropertySymbols(e);y<n.length;y++)s.indexOf(n[y])<0&&Object.prototype.propertyIsEnumerable.call(e,n[y])&&(p[n[y]]=e[n[y]]);return p};const Me=me({compatConfig:{MODE:3},inheritAttrs:!1,props:yt(),emits:["close","handleClick","change"],setup(e,s){let{emit:p,slots:n}=s;const y=L(),O=L(),M=L(),T=L(),N=L();let D=[];"drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(Math.random()*9).toString())).toString(16)),Ee(()=>{ve(()=>{var d;const{open:u,getContainer:S,showMask:B,autofocus:k}=e,b=S==null?void 0:S();P(e),u&&(b&&(b.parentNode,document.body),ve(()=>{k&&_()}),B&&((d=e.scrollLocker)===null||d===void 0||d.lock()))})}),Z(()=>e.level,()=>{P(e)},{flush:"post"}),Z(()=>e.open,()=>{const{open:d,getContainer:u,scrollLocker:S,showMask:B,autofocus:k}=e,b=u==null?void 0:u();b&&(b.parentNode,document.body),d?(k&&_(),B&&(S==null||S.lock())):S==null||S.unLock()},{flush:"post"}),Le(()=>{var d;const{open:u}=e;u&&(document.body.style.touchAction=""),(d=e.scrollLocker)===null||d===void 0||d.unLock()}),Z(()=>e.placement,d=>{d&&(N.value=null)});const _=()=>{var d,u;(u=(d=O.value)===null||d===void 0?void 0:d.focus)===null||u===void 0||u.call(d)},$=d=>{p("close",d)},h=d=>{d.keyCode===st.ESC&&(d.stopPropagation(),$(d))},j=()=>{const{open:d,afterVisibleChange:u}=e;u&&u(!!d)},P=d=>{let{level:u,getContainer:S}=d;if(ht)return;const B=S==null?void 0:S(),k=B?B.parentNode:null;D=[],u==="all"?(k?Array.prototype.slice.call(k.children):[]).forEach(c=>{c.nodeName!=="SCRIPT"&&c.nodeName!=="STYLE"&&c.nodeName!=="LINK"&&c!==B&&D.push(c)}):u&&vt(u).forEach(b=>{document.querySelectorAll(b).forEach(c=>{D.push(c)})})},w=d=>{p("handleClick",d)},A=L(!1);return Z(O,()=>{ve(()=>{A.value=!0})}),()=>{var d,u;const{width:S,height:B,open:k,prefixCls:b,placement:c,level:H,levelMove:W,ease:q,duration:se,getContainer:oe,onChange:le,afterVisibleChange:ue,showMask:J,maskClosable:ee,maskStyle:te,keyboard:ne,getOpenCount:i,scrollLocker:f,contentWrapperStyle:v,style:F,class:E,rootClassName:re,rootStyle:ie,maskMotion:fe,motion:ae,inline:ce}=e,l=bt(e,["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class","rootClassName","rootStyle","maskMotion","motion","inline"]),t=k&&A.value,a=Ce(b,{["".concat(b,"-").concat(c)]:!0,["".concat(b,"-open")]:t,["".concat(b,"-inline")]:ce,"no-mask":!J,[re]:!0}),r=typeof ae=="function"?ae(c):ae;return m("div",z(z({},ze(l,["autofocus"])),{},{tabindex:-1,class:a,style:ie,ref:O,onKeydown:t&&ne?h:void 0}),[m(_e,fe,{default:()=>[J&&Se(m("div",{class:"".concat(b,"-mask"),onClick:ee?$:void 0,style:te,ref:M},null),[[ke,t]])]}),m(_e,z(z({},r),{},{onAfterEnter:j,onAfterLeave:j}),{default:()=>[Se(m("div",{class:"".concat(b,"-content-wrapper"),style:[v],ref:y},[m("div",{class:["".concat(b,"-content"),E],style:F,ref:N},[(d=n.default)===null||d===void 0?void 0:d.call(n)]),n.handler?m("div",{onClick:w,ref:T},[(u=n.handler)===null||u===void 0?void 0:u.call(n)]):null]),[[ke,t]])]})])}}});var Ve=function(e,s){var p={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(p[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,n=Object.getOwnPropertySymbols(e);y<n.length;y++)s.indexOf(n[y])<0&&Object.prototype.propertyIsEnumerable.call(e,n[y])&&(p[n[y]]=e[n[y]]);return p};const gt=me({compatConfig:{MODE:3},inheritAttrs:!1,props:Re(pt(),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:()=>{},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],setup(e,s){let{emit:p,slots:n}=s;const y=U(null),O=T=>{p("handleClick",T)},M=T=>{p("close",T)};return()=>{const{getContainer:T,wrapperClassName:N,rootClassName:D,rootStyle:_,forceRender:$}=e,h=Ve(e,["getContainer","wrapperClassName","rootClassName","rootStyle","forceRender"]);let j=null;if(!T)return m(Me,z(z({},h),{},{rootClassName:D,rootStyle:_,open:e.open,onClose:M,onHandleClick:O,inline:!0}),n);const P=!!n.handler||$;return(P||e.open||y.value)&&(j=m(ut,{autoLock:!0,visible:e.open,forceRender:P,getContainer:T,wrapperClassName:N},{default:w=>{var{visible:A,afterClose:d}=w,u=Ve(w,["visible","afterClose"]);return m(Me,z(z(z({ref:y},h),u),{},{rootClassName:D,rootStyle:_,open:A!==void 0?A:e.open,afterVisibleChange:d!==void 0?d:e.afterVisibleChange,onClose:M,onHandleClick:O}),n)}})),j}}}),wt=e=>{const{componentCls:s,motionDurationSlow:p}=e,n={"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:"all ".concat(p)}}};return{[s]:{["".concat(s,"-mask-motion")]:{"&-enter, &-appear, &-leave":{"&-active":{transition:"all ".concat(p)}},"&-enter, &-appear":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}}},["".concat(s,"-panel-motion")]:{"&-left":[n,{"&-enter, &-appear":{"&-start":{transform:"translateX(-100%) !important"},"&-active":{transform:"translateX(0)"}},"&-leave":{transform:"translateX(0)","&-active":{transform:"translateX(-100%)"}}}],"&-right":[n,{"&-enter, &-appear":{"&-start":{transform:"translateX(100%) !important"},"&-active":{transform:"translateX(0)"}},"&-leave":{transform:"translateX(0)","&-active":{transform:"translateX(100%)"}}}],"&-top":[n,{"&-enter, &-appear":{"&-start":{transform:"translateY(-100%) !important"},"&-active":{transform:"translateY(0)"}},"&-leave":{transform:"translateY(0)","&-active":{transform:"translateY(-100%)"}}}],"&-bottom":[n,{"&-enter, &-appear":{"&-start":{transform:"translateY(100%) !important"},"&-active":{transform:"translateY(0)"}},"&-leave":{transform:"translateY(0)","&-active":{transform:"translateY(100%)"}}}]}}}},Ct=e=>{const{componentCls:s,zIndexPopup:p,colorBgMask:n,colorBgElevated:y,motionDurationSlow:O,motionDurationMid:M,padding:T,paddingLG:N,fontSizeLG:D,lineHeightLG:_,lineWidth:$,lineType:h,colorSplit:j,marginSM:P,colorIcon:w,colorIconHover:A,colorText:d,fontWeightStrong:u,drawerFooterPaddingVertical:S,drawerFooterPaddingHorizontal:B}=e,k="".concat(s,"-content-wrapper");return{[s]:{position:"fixed",inset:0,zIndex:p,pointerEvents:"none","&-pure":{position:"relative",background:y,["&".concat(s,"-left")]:{boxShadow:e.boxShadowDrawerLeft},["&".concat(s,"-right")]:{boxShadow:e.boxShadowDrawerRight},["&".concat(s,"-top")]:{boxShadow:e.boxShadowDrawerUp},["&".concat(s,"-bottom")]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},["".concat(s,"-mask")]:{position:"absolute",inset:0,zIndex:p,background:n,pointerEvents:"auto"},[k]:{position:"absolute",zIndex:p,transition:"all ".concat(O),"&-hidden":{display:"none"}},["&-left > ".concat(k)]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},["&-right > ".concat(k)]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},["&-top > ".concat(k)]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},["&-bottom > ".concat(k)]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},["".concat(s,"-content")]:{width:"100%",height:"100%",overflow:"auto",background:y,pointerEvents:"auto"},["".concat(s,"-wrapper-body")]:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},["".concat(s,"-header")]:{display:"flex",flex:0,alignItems:"center",padding:"".concat(T,"px ").concat(N,"px"),fontSize:D,lineHeight:_,borderBottom:"".concat($,"px ").concat(h," ").concat(j),"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},["".concat(s,"-extra")]:{flex:"none"},["".concat(s,"-close")]:{display:"inline-block",marginInlineEnd:P,color:w,fontWeight:u,fontSize:D,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,outline:0,cursor:"pointer",transition:"color ".concat(M),textRendering:"auto","&:focus, &:hover":{color:A,textDecoration:"none"}},["".concat(s,"-title")]:{flex:1,margin:0,color:d,fontWeight:e.fontWeightStrong,fontSize:D,lineHeight:_},["".concat(s,"-body")]:{flex:1,minWidth:0,minHeight:0,padding:N,overflow:"auto"},["".concat(s,"-footer")]:{flexShrink:0,padding:"".concat(S,"px ").concat(B,"px"),borderTop:"".concat($,"px ").concat(h," ").concat(j)},"&-rtl":{direction:"rtl"}}}},_t=Xe("Drawer",e=>{const s=Ye(e,{drawerFooterPaddingVertical:e.paddingXS,drawerFooterPaddingHorizontal:e.padding});return[Ct(s),wt(s)]},e=>({zIndexPopup:e.zIndexPopupBase}));var St=function(e,s){var p={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(p[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,n=Object.getOwnPropertySymbols(e);y<n.length;y++)s.indexOf(n[y])<0&&Object.prototype.propertyIsEnumerable.call(e,n[y])&&(p[n[y]]=e[n[y]]);return p};const kt=["top","right","bottom","left"],Ae={distance:180},xt=()=>({autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:g.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:{type:[String,Function,Boolean,Object],default:void 0},maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:Y(),rootClassName:String,rootStyle:Y(),size:{type:String},drawerStyle:Y(),headerStyle:Y(),bodyStyle:Y(),contentWrapperStyle:{type:Object,default:void 0},title:g.any,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},width:g.oneOfType([g.string,g.number]),height:g.oneOfType([g.string,g.number]),zIndex:Number,prefixCls:String,push:g.oneOfType([g.looseBool,{type:Object}]),placement:g.oneOf(kt),keyboard:{type:Boolean,default:void 0},extra:g.any,footer:g.any,footerStyle:Y(),level:g.any,levelMove:{type:[Number,Array,Function]},handle:g.any,afterVisibleChange:Function,onAfterVisibleChange:Function,onAfterOpenChange:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onClose:Function}),Dt=me({compatConfig:{MODE:3},name:"ADrawer",inheritAttrs:!1,props:Re(xt(),{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:Ae}),slots:Object,setup(e,s){let{emit:p,slots:n,attrs:y}=s;const O=L(!1),M=L(!1),T=L(null),N=L(!1),D=L(!1),_=K(()=>{var i;return(i=e.open)!==null&&i!==void 0?i:e.visible});Z(_,()=>{_.value?N.value=!0:D.value=!1},{immediate:!0}),Z([_,N],()=>{_.value&&N.value&&(D.value=!0)},{immediate:!0});const $=qe("parentDrawerOpts",null),{prefixCls:h,getPopupContainer:j,direction:P}=Je("drawer",e),[w,A]=_t(h),d=K(()=>e.getContainer===void 0&&(j!=null&&j.value)?()=>j.value(document.body):e.getContainer);dt(!e.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),Qe("parentDrawerOpts",{setPush:()=>{O.value=!0},setPull:()=>{O.value=!1,ve(()=>{B()})}}),Ee(()=>{_.value&&$&&$.setPush()}),Le(()=>{$&&$.setPull()}),Z(D,()=>{$&&(D.value?$.setPush():$.setPull())},{flush:"post"});const B=()=>{var i,f;(f=(i=T.value)===null||i===void 0?void 0:i.domFocus)===null||f===void 0||f.call(i)},k=i=>{p("update:visible",!1),p("update:open",!1),p("close",i)},b=i=>{var f;i||(M.value===!1&&(M.value=!0),e.destroyOnClose&&(N.value=!1)),(f=e.afterVisibleChange)===null||f===void 0||f.call(e,i),p("afterVisibleChange",i),p("afterOpenChange",i)},c=K(()=>{const{push:i,placement:f}=e;let v;return typeof i=="boolean"?v=i?Ae.distance:0:v=i.distance,v=parseFloat(String(v||0)),f==="left"||f==="right"?"translateX(".concat(f==="left"?v:-v,"px)"):f==="top"||f==="bottom"?"translateY(".concat(f==="top"?v:-v,"px)"):null}),H=K(()=>{var i;return(i=e.width)!==null&&i!==void 0?i:e.size==="large"?736:378}),W=K(()=>{var i;return(i=e.height)!==null&&i!==void 0?i:e.size==="large"?736:378}),q=K(()=>{const{mask:i,placement:f}=e;if(!D.value&&!i)return{};const v={};return f==="left"||f==="right"?v.width=Fe(H.value)?"".concat(H.value,"px"):H.value:v.height=Fe(W.value)?"".concat(W.value,"px"):W.value,v}),se=K(()=>{const{zIndex:i,contentWrapperStyle:f}=e,v=q.value;return[{zIndex:i,transform:O.value?c.value:void 0},G({},f),v]}),oe=i=>{const{closable:f,headerStyle:v}=e,F=he(n,e,"extra"),E=he(n,e,"title");return!E&&!f?null:m("div",{class:Ce("".concat(i,"-header"),{["".concat(i,"-header-close-only")]:f&&!E&&!F}),style:v},[m("div",{class:"".concat(i,"-header-title")},[le(i),E&&m("div",{class:"".concat(i,"-title")},[E])]),F&&m("div",{class:"".concat(i,"-extra")},[F])])},le=i=>{var f;const{closable:v}=e,F=n.closeIcon?(f=n.closeIcon)===null||f===void 0?void 0:f.call(n):e.closeIcon;return v&&m("button",{key:"closer",onClick:k,"aria-label":"Close",class:"".concat(i,"-close")},[F===void 0?m(Ze,null,null):F])},ue=i=>{var f;if(M.value&&!e.forceRender&&!N.value)return null;const{bodyStyle:v,drawerStyle:F}=e;return m("div",{class:"".concat(i,"-wrapper-body"),style:F},[oe(i),m("div",{key:"body",class:"".concat(i,"-body"),style:v},[(f=n.default)===null||f===void 0?void 0:f.call(n)]),J(i)])},J=i=>{const f=he(n,e,"footer");if(!f)return null;const v="".concat(i,"-footer");return m("div",{class:v,style:e.footerStyle},[f])},ee=K(()=>Ce({"no-mask":!e.mask,["".concat(h.value,"-rtl")]:P.value==="rtl"},e.rootClassName,A.value)),te=K(()=>xe(De(h.value,"mask-motion"))),ne=i=>xe(De(h.value,"panel-motion-".concat(i)));return()=>{const{width:i,height:f,placement:v,mask:F,forceRender:E}=e,re=St(e,["width","height","placement","mask","forceRender"]),ie=G(G(G({},y),ze(re,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","onAfterVisibleChange","onClose","onUpdate:visible","onUpdate:open","visible"])),{forceRender:E,onClose:k,afterVisibleChange:b,handler:!1,prefixCls:h.value,open:D.value,showMask:F,placement:v,ref:T});return w(m(ft,null,{default:()=>[m(gt,z(z({},ie),{},{maskMotion:te.value,motion:ne,width:H.value,height:W.value,getContainer:d.value,rootClassName:ee.value,rootStyle:e.rootStyle,contentWrapperStyle:se.value}),{handler:e.handle?()=>e.handle:n.handle,default:()=>ue(h.value)})]}))}}}),Ot=Ge(Dt),$t=["id"],Pt={key:0},Nt={class:"data-table-buttons"},Tt={key:1,class:"data-table"},jt={key:2,class:"data-table"},It=["innerHTML"],Bt=me({__name:"GroupConditionalControl",props:{params:{type:Object,required:!0},conditionalValues:{type:Object,required:!1,default:()=>({})}},emits:["input","fieldData","selectedCondition","conditionalData","selectedDependent","fieldUpdatedData","fieldUpdatedPopupData","updateDataSource"],setup(e,{emit:s}){var fe,ae,ce;const p=e,{params:n}=et(p),y=lt(),{editedRowKey:O,selectedConditionKey:M,selectedConditionValue:T,openDrawer:N,dynamicOptions:D,groupData:_}=tt(y),$=s,h=n.value,j=h.classes,P=h.id,w=U(h.fields),A=window.lodash.cloneDeep(w),d=nt({fields:w.value}),u=U(h.table.data),S=h.group_action,B=(fe=h.table)==null?void 0:fe.edit_action,k=U((ce=(ae=h.table)==null?void 0:ae.inline_edit)!=null?ce:!0),b=U(!1),c=U([]),H=U([]),W=U(""),q=U(""),se=U("right");if(typeof _.value<"u"&&Object.keys(_.value).length>0&&typeof _.value[P]<"u"&&(u.value=_.value[P]),d.fields)for(const[l,t]of Object.entries(d.fields)){const a=t;c.value[a.id]=a.default}const oe=l=>{Object.entries(l).forEach(([t,a])=>{c.value[t]=a})};typeof w.value<"u"&&w.value!==null&&(d.fields=w.value.filter(l=>typeof l.hide<"u"&&l.hide!==null?!l.hide:!0));const le=l=>{let t="",a="";for(const[r,o]of Object.entries(l)){let C=o;t=r,a=C}d.fields=w.value.filter(r=>{if(typeof r.condition<"u"&&r.condition!==null){const o=r.condition.find(C=>C.key===t);return o.value==="yes"&&a==="yes"?!0:o.value==="no"&&a==="no"}else return!0}),H.value[t]=a},ue=l=>{Object.assign(u.value.filter(t=>l.key===t.key)[0],l),_.value[P]=u.value},J=l=>{N.value=!0,O.value=l.key,c.value=l,W.value=l!=null&&l.field_name?l.field_name:"",q.value=l!=null&&l.field_description?l.field_description:"",M.value="",T.value="",d.fields=w.value.filter(t=>{if(typeof l[t.id]<"u"&&l[t.id]!==null){const a=w.value.find(r=>r.id===t.id);if(typeof l.disabled_field<"u"&&l.disabled_field.includes(t.id))return!1;if(typeof a.condition<"u"&&a.condition!==null){const r=a.condition.find(o=>Array.isArray(o.value)&&o.value.includes(l[o.key])?o.value.includes(l[o.key]):o.value===l[o.key]);if(typeof r<"u"&&r!==null){let o=l[t.id];return typeof t.prefix<"u"&&t.prefix!==null&&(o=o.replace(t.prefix,"")),t.default=o,typeof a.dependent_option<"u"&&a.dependent_option!==null&&(D.value[a.dependent_option]=l[a.dependent_option]),!0}else return!1}else{let r=l[t.id];return typeof t.prefix<"u"&&t.prefix!==null&&(r=r.replace(t.prefix,"")),t.default=r,typeof t.disable_edit<"u"&&t.disable_edit&&(t.disabled=t.disable_edit),!0}}else if(typeof l.additional_fields<"u"&&typeof l.additional_fields[t.id]<"u"){if(typeof l.disabled_field<"u"&&l.disabled_field.includes(t.id))return!1;{let a=l.additional_fields[t.id];return typeof t.prefix<"u"&&t.prefix!==null&&(a=a.replace(t.prefix,"")),t.default=a,typeof t.disable_edit<"u"&&t.disable_edit&&(t.disabled=t.disable_edit),!0}}else return!1})},ee=l=>{u.value=u.value.filter(t=>t.key!==l),_.value[P]=u.value},te=l=>{let t="",a="";for(const[r,o]of Object.entries(l)){let C=o;t=r,a=C}d.fields=w.value.filter(r=>{const o=w.value.find(C=>C.id===r.id);if(o)if(typeof o.condition<"u"&&o.condition!==null){const C=o.condition.find(V=>V.key===t);return typeof C<"u"&&C.key===t&&(!Array.isArray(C.value)&&C.value===a||Array.isArray(C.value)&&C.value.includes(a))?(typeof c.value[o.id]<"u"&&c.value[o.id]!==null&&(r.default=c.value[o.id]),typeof o.dependent_option<"u"&&o.dependent_option!==null&&(r.default=o.dependent_default),!0):!1}else return typeof c.value[o.id]<"u"&&c.value[o.id]!==null&&(r.default=c.value[o.id]),typeof o.dependent_option<"u"&&o.dependent_option!==null&&(r.default=o.dependent_default),!0;else return!1})},ne=l=>{d.fields=w.value.filter(t=>{const a=w.value.find(r=>r.id===t.id);return a?typeof a.hide<"u"&&a.hide!==null&&a.hide?!1:(typeof c.value[a.id]<"u"&&c.value[a.id]!==null&&(t.default=c.value[a.id]),typeof a.dependent_option<"u"&&a.dependent_option!==null&&(t.default=a.dependent_default),!0):!1})},i=async()=>{b.value=!0;const l=[{key:"action",value:S}],t={};let a=0;if(u.value.length>0){let r=u.value.map(C=>C.key);a=Math.max(...r)+1}for(const[r,o]of Object.entries(c.value)){let C=o;typeof o=="object"&&o!==null&&(C=JSON.stringify(o)),l.push({key:r,value:C});let V=o;const Q=w.value.find(He=>He.id===r);typeof Q<"u"&&typeof Q.prefix<"u"&&(V=Q.prefix+o),t[r]=V}t.key=a,t.field_order=0,delete t.deletetable,delete t.disabled_field,delete t.field_description;try{await Be(l)==="success"&&(u.value.push(t),_.value[P]=u.value,M.value="",T.value="",k.value||$("fieldUpdatedData",t)),b.value=!1}catch(r){console.error(r)}finally{b.value=!1,E()}},f=()=>{N.value=!1,O.value=null,E()},v=async()=>{b.value=!0;const l=[{key:"action",value:B}],t={};for(const[a,r]of Object.entries(c.value)){let o=r;typeof r=="object"&&r!==null&&(o=JSON.stringify(r)),l.push({key:a,value:o});let C=r;const V=w.value.find(Q=>Q.id===a);if(typeof V<"u"&&typeof V.prefix<"u")if(typeof V.exclude_prefix<"u"&&Array.isArray(V.exclude_prefix)&&V.exclude_prefix.includes(r))C=r;else{const Q=o.replace(V.prefix,"");C=V.prefix+Q}t[a]=C}try{await Be(l)==="success"&&(W.value="",Object.assign(u.value.filter(r=>t.key===r.key)[0],t),_.value[P]=u.value,f(),k.value||$("fieldUpdatedData",t)),b.value=!1}catch(a){}finally{b.value=!1,f()}},F=l=>{_.value[P]=l},E=()=>{d.fields=w.value.filter(l=>{const t=A.value.find(r=>r.id===l.id);let a="";return typeof t.default<"u"&&t.default!==null&&(a=t.default),l.default=a,typeof t.disable_edit<"u"&&t.disable_edit&&(l.disabled=!1),c.value[t.id]=a,typeof t.hide<"u"&&t.hide!==null?!t.hide:!0})},re=Oe("cancelButtonText",wp.i18n.__("Cancel","woocommerce-wholesale-prices")),ie=Oe("saveButtonText",wp.i18n.__("Update Item","woocommerce-wholesale-prices"));return(l,t)=>{var a;return I(),R(pe,null,[$e("div",{id:x(P),class:at(x(j))},[x(O)===null?(I(),R("div",Pt,[(I(!0),R(pe,null,Pe(d.fields,(r,o)=>(I(),R("div",{key:o},[(I(),de(Ie,null,{fallback:X(()=>[m(Ne)]),default:X(()=>[(I(),de(Te(x(je)(r.type)),{params:r,"conditional-values":H.value,onFieldData:oe,onConditionalData:le,onSelectedCondition:te,onSelectedDependent:ne},null,40,["params","conditional-values"]))]),_:2},1024))]))),128)),$e("div",Nt,[x(h).button_label!==""?(I(),de(x(we),{key:0,type:"primary",class:"save-group-btn",loading:b.value,onClick:i},{default:X(()=>[be(ge(x(h).button_label),1)]),_:1},8,["loading"])):ye("",!0)])])):ye("",!0),(a=x(h).table)!=null&&a.drag_and_drop?(I(),R("div",Tt,[m(rt,{params:x(h).table,data:u.value,"edit-fields":w.value,"edited-fields":x(O),onFieldUpdatedData:J,onFieldDeletedData:ee,onUpdateDataSource:F},null,8,["params","data","edit-fields","edited-fields"])])):(I(),R("div",jt,[m(it,{params:x(h).table,data:u.value,"edit-fields":w.value,onFieldUpdatedData:ue,onFieldUpdatedPopupData:J,onFieldDeletedData:ee},null,8,["params","data","edit-fields"])]))],10,$t),m(x(Ot),{width:600,title:W.value,placement:se.value,open:x(N),onClose:f},{extra:X(()=>[m(x(we),{style:{"margin-right":"8px"},onClick:f},{default:X(()=>[be(ge(x(re)),1)]),_:1}),m(x(we),{type:"primary",loading:b.value,onClick:v},{default:X(()=>[be(ge(x(ie)),1)]),_:1},8,["loading"])]),default:X(()=>{var r;return[x(O)!==null?(I(),R(pe,{key:0},[q.value!==""?(I(),R("div",{key:0,class:"wwp-drawer-description",innerHTML:x(ot)(((r=q.value)==null?void 0:r.length)>0?q.value:"")},null,8,It)):ye("",!0),(I(!0),R(pe,null,Pe(d.fields,(o,C)=>(I(),R("div",{key:C},[(I(),de(Ie,null,{fallback:X(()=>[m(Ne)]),default:X(()=>[(I(),de(Te(x(je)(o.type)),{params:o,"conditional-values":H.value,onFieldData:oe,onConditionalData:le,onSelectedCondition:te,onSelectedDependent:ne},null,40,["params","conditional-values"]))]),_:2},1024))]))),128))],64)):ye("",!0)]}),_:1},8,["title","placement","open"])],64)}}}),kn=ct(Bt,[["__scopeId","data-v-96558d5e"]]);export{kn as default};
