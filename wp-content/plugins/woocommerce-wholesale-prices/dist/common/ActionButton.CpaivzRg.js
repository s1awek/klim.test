import{q as r,ab as m,d as C,v as p,aA as y,b as O,D as i,k as P}from"../apps/settings/index.0FToouit.js";import{c as A,B as D}from"./index.DuahDua_.js";const R=()=>{const t=r(!1);return m(()=>{t.value=!0}),t},x={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:P(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function v(t){return!!(t&&t.then)}const T=C({compatConfig:{MODE:3},name:"ActionButton",props:x,setup(t,b){let{slots:g}=b;const u=r(!1),f=r(),a=r(!1);let c;const d=R();p(()=>{t.autofocus&&(c=setTimeout(()=>{var e,n;return(n=(e=y(f.value))===null||e===void 0?void 0:e.focus)===null||n===void 0?void 0:n.call(e)}))}),m(()=>{clearTimeout(c)});const l=function(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];(e=t.close)===null||e===void 0||e.call(t,...o)},B=e=>{v(e)&&(a.value=!0,e.then(function(){d.value||(a.value=!1),l(...arguments),u.value=!1},n=>(d.value||(a.value=!1),u.value=!1,Promise.reject(n))))},h=e=>{const{actionFn:n}=t;if(u.value)return;if(u.value=!0,!n){l();return}let o;if(t.emitEvent){if(o=n(e),t.quitOnNullishReturnValue&&!v(o)){u.value=!1,l(e);return}}else if(n.length)o=n(t.close),u.value=!1;else if(o=n(),!o){l();return}B(o)};return()=>{const{type:e,prefixCls:n,buttonProps:o}=t;return O(D,i(i(i({},A(e)),{},{onClick:h,loading:a.value,prefixCls:n},o),{},{ref:f}),g)}}});export{T as A};
