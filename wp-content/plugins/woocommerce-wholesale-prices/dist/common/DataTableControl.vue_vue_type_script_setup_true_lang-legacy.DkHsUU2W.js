System.register(["../apps/settings/index-legacy.CV2KRSvP.js","./GroupEditFields.vue_vue_type_script_setup_true_lang-legacy.Dxy3PDwb.js","./index-legacy.ZEOhfVRA.js","./EditOutlined-legacy.BZ8mIl-g.js","./DeleteOutlined-legacy.KvWF-zoM.js","./index-legacy.CaBoHDtx.js"],(function(e,t){"use strict";var a,l,n,i,r,o,c,d,s,u,f,y,v,p,k,b,g,m,j,O,h,_,D,w,x;return{setters:[e=>{a=e.b,l=e.a0,n=e.d,i=e.t,r=e.r,o=e.S,c=e.o,d=e.e,s=e.w,u=e.c,f=e.a,y=e.U,v=e.u,p=e.f,k=e.R,b=e.i,g=e.h,m=e.p,j=e.n,O=e.$},e=>{h=e._},e=>{_=e.A},e=>{D=e.E},e=>{w=e.D},e=>{x=e.A}],execute:function(){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){S(e,t,a[t])}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=function(e,n){var i=C({},e,n.attrs);return a(l,C({},i,{icon:t}),null)};H.displayName="SaveOutlined",H.inheritAttrs=!1;const M={key:0,class:"editable-row-operations"},U={class:"editable-cell"},P=["loading","onClick"],V=["onClick"],z={key:0},A=["innerHTML"],L={key:1},T=["innerHTML"];e("_",n({__name:"DataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})}},emits:["fieldData","fieldUpdatedData","fieldUpdatedPopupData","fieldDeletedData"],setup(e,{emit:t}){var l,n;const C=e,{params:S,data:E,editFields:F}=i(C),q=S.value,N=r(null!==(l=q.paginated)&&void 0!==l&&l),B=q.fields,G=r(q.classes),I=r(E),J=q.editable,R=q.can_delete,$=q.edit_action,K=q.delete_action,Q=r(null===(n=q.inline_edit)||void 0===n||n),W=r(!1),X=o([]),Y=t,Z=r([]),ee=e=>{for(const[t,a]of Object.entries(e))Z.value[t]=a},te=e=>{const t=[];for(const[a,l]of Object.entries(F.value))t[l.id]=l;return void 0!==t[e]?t[e]:{}},ae=e=>Array.isArray(e)?e.join(", "):e;return(e,t)=>(c(),d(v(x),{class:j(G.value),"data-source":I.value,columns:v(B),pagination:N.value,bordered:""},{bodyCell:s((({column:e,text:l,record:n})=>["operation"===e.key?(c(),u("div",M,[f("div",U,[X[n.key]&&Q.value?(c(),u(y,{key:0},[f("a",{loading:W.value,onClick:e=>(async e=>{const t=[{key:"action",value:$}],a={};a.key=e;for(const[n,i]of Object.entries(Z.value)){let e=i;"object"==typeof i&&null!==i&&(e=JSON.stringify(i)),t.push({key:n,value:e}),a[n]=i}try{"success"===await O(t)&&Y("fieldUpdatedData",a)}catch(l){console.error(l)}finally{W.value=!1}delete X[e]})(n.key)},[a(v(H))],8,P),t[0]||(t[0]=p("   ")),a(v(_),{title:"Sure to cancel?",onConfirm:e=>{return t=n.key,void delete X[t];var t}},{default:s((()=>[f("a",null,[a(v(k))])])),_:2},1032,["onConfirm"])],64)):(c(),u(y,{key:1},[v(J)?(c(),u("a",{key:0,onClick:e=>{return t=n.key,X[t]=window.lodash.cloneDeep(I.value.filter((e=>t===e.key))[0]),Z.value=X[t],void(!1===Q.value?Y("fieldUpdatedPopupData",X[t]):Y("fieldUpdatedData",X[t]));var t}},[a(v(D))],8,V)):b("",!0),t[1]||(t[1]=p("   ")),v(R)?(c(),u(y,{key:1},[I.value.length?(c(),d(v(_),{key:0,title:"Sure to delete?",onConfirm:e=>(async e=>{const t=I.value.filter((t=>e===t.key))[0],a=[{key:"action",value:K}];for(const[n,i]of Object.entries(t))a.push({key:n,value:i});try{"success"===await O(a)&&Y("fieldDeletedData",e)}catch(l){console.error(l)}finally{W.value=!1}})(n.key)},{default:s((()=>[f("a",null,[a(v(w))])])),_:2},1032,["onConfirm"])):b("",!0)],64)):b("",!0)],64))])])):(c(),u(y,{key:1},[Q.value?(c(),u("div",z,[X[n.key]?(c(),d(h,{key:0,"editable-data":X[n.key],"field-value":X[n.key][e.dataIndex],"field-data":te(e.field),onFieldUpdatedData:ee},null,8,["editable-data","field-value","field-data"])):(c(),u(y,{key:1},[p(g(e.prefix)+" ",1),f("span",{innerHTML:v(m)(ae(l))},null,8,A),p(" "+g(e.suffix),1)],64))])):(c(),u("div",L,[p(g(e.prefix)+" ",1),f("span",{innerHTML:v(m)(ae(l))},null,8,T),p(" "+g(e.suffix),1)]))],64))])),_:1},8,["class","data-source","columns","pagination"]))}}))}}}));
