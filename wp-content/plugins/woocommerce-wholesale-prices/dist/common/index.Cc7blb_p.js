import{G as _,b0 as g,b as C,d as L,k as G,q as U,v as $,ab as w,T as q,aA as y,as as k,L as J,J as K,A as Q,y as X,x as Y}from"../apps/settings/index.0FToouit.js";import{w as S,i as Z}from"./motion.EdENdc_P.js";import{u as l}from"./useState.DjxQpG1z.js";const ee=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(n,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},te=_("Wave",e=>[ee(e)]);function ne(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function b(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&ne(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ae(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return b(t)?t:b(n)?n:b(r)?r:null}function h(e){return Number.isNaN(e)?0:e}const oe=L({props:{target:G(),className:String},setup(e){const t=U(null),[n,r]=l(null),[d,i]=l([]),[u,v]=l(0),[c,m]=l(0),[a,f]=l(0),[O,B]=l(0),[I,A]=l(!1);function T(){const{target:o}=e,s=getComputedStyle(o);r(ae(o));const R=s.position==="static",{borderLeftWidth:z,borderTopWidth:F}=s;v(R?o.offsetLeft:h(-parseFloat(z))),m(R?o.offsetTop:h(-parseFloat(F))),f(o.offsetWidth),B(o.offsetHeight);const{borderTopLeftRadius:D,borderTopRightRadius:H,borderBottomLeftRadius:M,borderBottomRightRadius:P}=s;i([D,H,P,M].map(V=>h(parseFloat(V))))}let p,W,x;const E=()=>{clearTimeout(x),S.cancel(W),p==null||p.disconnect()},N=()=>{var o;const s=(o=t.value)===null||o===void 0?void 0:o.parentElement;s&&(g(null,s),s.parentElement&&s.parentElement.removeChild(s))};$(()=>{E(),x=setTimeout(()=>{N()},5e3);const{target:o}=e;o&&(W=S(()=>{T(),A(!0)}),typeof ResizeObserver<"u"&&(p=new ResizeObserver(T),p.observe(o)))}),w(()=>{E()});const j=o=>{o.propertyName==="opacity"&&N()};return()=>{if(!I.value)return null;const o={left:"".concat(u.value,"px"),top:"".concat(c.value,"px"),width:"".concat(a.value,"px"),height:"".concat(O.value,"px"),borderRadius:d.value.map(s=>"".concat(s,"px")).join(" ")};return n&&(o["--wave-color"]=n.value),C(q,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[C("div",{ref:t,class:e.className,style:o,onTransitionend:j},null)]})}}});function re(e,t){const n=document.createElement("div");return n.style.position="absolute",n.style.left="0px",n.style.top="0px",e==null||e.insertBefore(n,e==null?void 0:e.firstChild),g(C(oe,{target:e,className:t},null),n),()=>{g(null,n),n.parentElement&&n.parentElement.removeChild(n)}}function se(e,t){const n=k();let r;function d(){var i;const u=y(n);r==null||r(),!(!((i=t==null?void 0:t.value)===null||i===void 0)&&i.disabled||!u)&&(r=re(u,e.value))}return w(()=>{r==null||r()}),d}const ue=L({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:n}=t;const r=k(),{prefixCls:d,wave:i}=J("wave",e),[,u]=te(d),v=se(K(()=>Q(d.value,u.value)),i);let c;const m=()=>{y(r).removeEventListener("click",c,!0)};return $(()=>{X(()=>e.disabled,()=>{m(),Y(()=>{const a=y(r);a==null||a.removeEventListener("click",c,!0),!(!a||a.nodeType!==1||e.disabled)&&(c=f=>{f.target.tagName==="INPUT"||!Z(f.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||v()},a.addEventListener("click",c,!0))})},{immediate:!0,flush:"post"})}),w(()=>{m()}),()=>{var a;return(a=n.default)===null||a===void 0?void 0:a.call(n)[0]}}});export{ue as W};
