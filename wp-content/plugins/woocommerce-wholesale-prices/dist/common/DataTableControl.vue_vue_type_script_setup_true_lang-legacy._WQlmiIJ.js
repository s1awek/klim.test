System.register(["../apps/settings/index-legacy.D_HQ7UHt.js","./GroupEditFields.vue_vue_type_script_setup_true_lang-legacy.CSn1h-l8.js","./index-legacy.Dc6Q8xCb.js","./EditOutlined-legacy.DA-DPmkm.js","./DeleteOutlined-legacy.BsKdC1O1.js","./index-legacy.zzIifafH.js"],function(e,t){"use strict";var a,l,n,i,r,o,c,d,s,u,f,y,v,p,k,b,g,m,j,O,h,_,D,w,x;return{setters:[e=>{a=e.b,l=e.a0,n=e.d,i=e.t,r=e.r,o=e.S,c=e.e,d=e.o,s=e.w,u=e.c,f=e.a,y=e.U,v=e.h,p=e.u,k=e.R,b=e.f,g=e.i,m=e.p,j=e.n,O=e.$},e=>{h=e._},e=>{_=e.A},e=>{D=e.E},e=>{w=e.D},e=>{x=e.A}],execute:function(){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),l.forEach(function(t){S(e,t,a[t])})}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=function(e,n){var i=C({},e,n.attrs);return a(l,C({},i,{icon:t}),null)};H.displayName="SaveOutlined",H.inheritAttrs=!1;const M={key:0,class:"editable-row-operations"},U={class:"editable-cell"},P=["loading","onClick"],V=["onClick"],z={key:0},A=["innerHTML"],L={key:1},T=["innerHTML"];e("_",n({__name:"DataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})}},emits:["fieldData","fieldUpdatedData","fieldUpdatedPopupData","fieldDeletedData"],setup(e,{emit:t}){const l=e,{params:n,data:C,editFields:S}=i(l),E=n.value,F=r(E.paginated??!1),q=E.fields,N=r(E.classes),B=r(C),G=E.editable,I=E.can_delete,J=E.edit_action,R=E.delete_action,$=r(E.inline_edit??!0),K=r(!1),Q=o([]),W=t,X=r([]),Y=e=>{for(const[t,a]of Object.entries(e))X.value[t]=a},Z=e=>{const t=[];for(const[a,l]of Object.entries(S.value))t[l.id]=l;return void 0!==t[e]?t[e]:{}},ee=e=>Array.isArray(e)?e.join(", "):e;return(e,t)=>(d(),c(p(x),{class:j(N.value),"data-source":B.value,columns:p(q),pagination:F.value,bordered:""},{bodyCell:s(({column:e,text:l,record:n})=>["operation"===e.key?(d(),u("div",M,[f("div",U,[Q[n.key]&&$.value?(d(),u(y,{key:0},[f("a",{loading:K.value,onClick:e=>(async e=>{const t=[{key:"action",value:J}],a={};a.key=e;for(const[n,i]of Object.entries(X.value)){let e=i;"object"==typeof i&&null!==i&&(e=JSON.stringify(i)),t.push({key:n,value:e}),a[n]=i}try{"success"===await O(t)&&W("fieldUpdatedData",a)}catch(l){console.error(l)}finally{K.value=!1}delete Q[e]})(n.key)},[a(p(H))],8,P),t[0]||(t[0]=v("   ")),a(p(_),{title:"Sure to cancel?",onConfirm:e=>{return t=n.key,void delete Q[t];var t}},{default:s(()=>[f("a",null,[a(p(k))])]),_:2},1032,["onConfirm"])],64)):(d(),u(y,{key:1},[p(G)?(d(),u("a",{key:0,onClick:e=>{return t=n.key,Q[t]=window.lodash.cloneDeep(B.value.filter(e=>t===e.key)[0]),X.value=Q[t],void(!1===$.value?W("fieldUpdatedPopupData",Q[t]):W("fieldUpdatedData",Q[t]));var t}},[a(p(D))],8,V)):b("",!0),t[1]||(t[1]=v("   ")),p(I)?(d(),u(y,{key:1},[B.value.length?(d(),c(p(_),{key:0,title:"Sure to delete?",onConfirm:e=>(async e=>{const t=B.value.filter(t=>e===t.key)[0],a=[{key:"action",value:R}];for(const[n,i]of Object.entries(t))a.push({key:n,value:i});try{"success"===await O(a)&&W("fieldDeletedData",e)}catch(l){console.error(l)}finally{K.value=!1}})(n.key)},{default:s(()=>[f("a",null,[a(p(w))])]),_:2},1032,["onConfirm"])):b("",!0)],64)):b("",!0)],64))])])):(d(),u(y,{key:1},[$.value?(d(),u("div",z,[Q[n.key]?(d(),c(h,{key:0,"editable-data":Q[n.key],"field-value":Q[n.key][e.dataIndex],"field-data":Z(e.field),onFieldUpdatedData:Y},null,8,["editable-data","field-value","field-data"])):(d(),u(y,{key:1},[v(g(e.prefix)+" ",1),f("span",{innerHTML:p(m)(ee(l))},null,8,A),v(" "+g(e.suffix),1)],64))])):(d(),u("div",L,[v(g(e.prefix)+" ",1),f("span",{innerHTML:p(m)(ee(l))},null,8,T),v(" "+g(e.suffix),1)]))],64))]),_:1},8,["class","data-source","columns","pagination"]))}}))}}});
